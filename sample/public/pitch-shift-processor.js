!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";class t extends AudioProcessor{constructor(t,e){super(t,e),this.bufferSize=11025,this.buffer=new Float32Array(this.bufferSize),this.writePos=0,this.readPos=0,this.pitchRatio=1.5,this.formantRatio=1.2,this.dryWet=.7,this.hpf={prevIn:0,prevOut:0,alpha:.86}}process(t,e){const i=t[0],s=e[0];if(0===i.length||!i[0])return!0;const r=i[0],h=s[0];for(let t=0;t<r.length;t++)this.buffer[this.writePos]=r[t],this.writePos=(this.writePos+1)%this.bufferSize;for(let t=0;t<h.length;t++){let e=this.readPos%this.bufferSize;e<0&&(e+=this.bufferSize);const i=Math.floor(e),s=e-i,r=(i+1)%this.bufferSize,f=this.buffer[i]*(1-s)+this.buffer[r]*s,o=f-this.hpf.prevIn+this.hpf.alpha*this.hpf.prevOut;this.hpf.prevIn=f,this.hpf.prevOut=o,h[t]=o*this.dryWet+f*(1-this.dryWet),this.readPos+=this.pitchRatio,this.readPos>=this.bufferSize&&(this.readPos-=this.bufferSize,this.writePos=0)}return!0}}registerProcessor("pitch-shift-processor",t)}));
