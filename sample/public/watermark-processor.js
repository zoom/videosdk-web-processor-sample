!function(t){"function"==typeof define&&define.amd?define(t):t()}((function(){"use strict";class t extends VideoProcessor{context=null;watermarkImage=null;constructor(t,e){super(t,e),t.addEventListener("message",(t=>{"update_watermark_image"===t.data.cmd&&this.updateWatermarkImage(t.data.data)}))}async processFrame(t,e){return this.renderFrame(t,e),!0}onInit(){const t=this.getOutput();t&&(this.context=t.getContext("2d"),this.context||console.error("2D context could not be initialized."))}onUninit(){this.context=null,this.watermarkImage=null}updateWatermarkImage(t){this.watermarkImage=t}renderFrame(t,e){if(this.context){if(this.context.drawImage(t,0,0,e.width,e.height),this.watermarkImage){const t=e.width,a=e.height;this.context.globalAlpha=.5,this.context.drawImage(this.watermarkImage,0,0,t,a)}this.context.globalAlpha=1}}}registerProcessor("watermark-processor",t)}));
